# Vueç»„ä»¶æ‹å¹³å·¥å…· - npmå‘å¸ƒå’Œç›®å½•ç®¡ç†å»ºè®®

## ğŸ“¦ npm link vs npm publish çš„åŒºåˆ«

### npm link çš„è¡Œä¸º
- `npm link` ä¼šåˆ›å»ºæ•´ä¸ªé¡¹ç›®ç›®å½•çš„ç¬¦å·é“¾æ¥
- åŒ…æ‹¬ `example/`ã€`test/`ã€`log.md` ç­‰æ‰€æœ‰æ–‡ä»¶
- ä¸»è¦ç”¨äº**æœ¬åœ°å¼€å‘å’Œè°ƒè¯•**

### npm publish çš„è¡Œä¸º  
- `npm publish` åªä¼šæ‰“åŒ… `files` å­—æ®µæŒ‡å®šçš„æ–‡ä»¶
- ä½ çš„é…ç½®å¾ˆå®Œç¾ï¼Œåªä¼šåŒ…å« `src/`ã€`webpack-plugin.js`ã€`README.md`
- è¿™æ˜¯**æ­£å¼å‘å¸ƒ**çš„æ ‡å‡†åšæ³•

## ğŸ¯ æœ€ä½³å®è·µå»ºè®®

### æ–¹æ¡ˆä¸€ï¼šå‘å¸ƒåˆ° npm registryï¼ˆæ¨èï¼‰

```bash
# 1. ç¡®ä¿ç‰ˆæœ¬å·æ­£ç¡®
npm version patch  # æˆ– minor, major

# 2. å‘å¸ƒåˆ°npm
npm publish

# 3. åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨
npm install vue-flattener-2
```

### æ–¹æ¡ˆäºŒï¼šæ”¹è¿› npm link ä½“éªŒ

åˆ›å»º `.npmignore` æ–‡ä»¶æ¥æ’é™¤ä¸éœ€è¦çš„ç›®å½•ï¼š

```bash
# å¼€å‘å’Œæµ‹è¯•æ–‡ä»¶
example/
test/
debug.js
test-debug.js
log.md

# é…ç½®æ–‡ä»¶ï¼ˆé¡¹ç›®ç‰¹å®šï¼‰
vue-flatten.config.json

# å¼€å‘ç›¸å…³
*.log
.vscode/
.idea/
```

### æ–¹æ¡ˆä¸‰ï¼šä½¿ç”¨ `npm pack` é¢„è§ˆï¼ˆæ¨èç”¨äºéªŒè¯ï¼‰

```bash
# é¢„è§ˆå°†è¢«æ‰“åŒ…çš„å†…å®¹
npm pack --dry-run

# å®é™…åˆ›å»ºå‹ç¼©åŒ…æŸ¥çœ‹
npm pack
tar -tzf vue-flattener-2-1.0.0.tgz
```

## ğŸ“‹ package.json é…ç½®ä¼˜åŒ–

å½“å‰çš„ `files` å­—æ®µé…ç½®å·²ç»å¾ˆå¥½ï¼š

```json
{
  "files": [
    "src/",
    "webpack-plugin.js",
    "README.md"
  ]
}
```

## ğŸŒŸ ä¸ºä»€ä¹ˆæ¨èå‘å¸ƒåˆ°npmï¼Ÿ

1. **ç”¨æˆ·ä½“éªŒæ›´å¥½**ï¼šç›´æ¥ `npm install` æ›´ç®€å•
2. **ç‰ˆæœ¬ç®¡ç†**ï¼šå¯ä»¥æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œä¾¿äºé¡¹ç›®ç®¡ç†
3. **ä¾èµ–ç®¡ç†**ï¼špackage.json å¯ä»¥æ˜ç¡®è®°å½•ä¾èµ–
4. **å›¢é˜Ÿåä½œ**ï¼šå›¢é˜Ÿæˆå‘˜ä¸éœ€è¦é¢å¤–é…ç½®
5. **CI/CDå‹å¥½**ï¼šè‡ªåŠ¨åŒ–æ„å»ºæ›´å®¹æ˜“

## ğŸ¯ å»ºè®®çš„å·¥ä½œæµç¨‹

```bash
# å¼€å‘é˜¶æ®µ - ä½¿ç”¨npm link
npm link  # æœ¬åœ°æµ‹è¯•

# å‘å¸ƒé˜¶æ®µ - å‘å¸ƒåˆ°npm
npm version patch
npm publish

# ä½¿ç”¨é˜¶æ®µ - ä»npmå®‰è£…
npm install vue-flattener-2
```

## ğŸ“š USAGE.md æ›´æ–°å»ºè®®

åœ¨ä½¿ç”¨æŒ‡å—ä¸­åŒæ—¶æä¾›ä¸¤ç§å®‰è£…æ–¹å¼ï¼š

```markdown
## ğŸš€ å®‰è£…æ–¹å¼

### æ–¹å¼ä¸€ï¼šnpmå®‰è£…ï¼ˆæ¨èï¼‰
```bash
# å®‰è£…åˆ°é¡¹ç›®
npm install vue-flattener-2

# å…¨å±€å®‰è£…ï¼ˆå¯é€‰ï¼‰
npm install -g vue-flattener-2
```

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘é“¾æ¥
```bash
# ä»…ç”¨äºæœ¬åœ°å¼€å‘å’Œæµ‹è¯•
cd vue-flattener-2
npm link

cd your-project  
npm link vue-flattener-2
```
```

## ğŸ”§ å®é™…æ“ä½œå»ºè®®

### ç«‹å³è¡ŒåŠ¨é¡¹ï¼š
1. **åˆ›å»º .npmignore æ–‡ä»¶**ï¼šæ’é™¤exampleã€debugæ–‡ä»¶ç­‰
2. **éªŒè¯æ‰“åŒ…å†…å®¹**ï¼šä½¿ç”¨ `npm pack --dry-run` æ£€æŸ¥
3. **å‡†å¤‡å‘å¸ƒ**ï¼šç¡®ä¿ç‰ˆæœ¬å·å’ŒREADMEå®Œæ•´
4. **æ›´æ–°æ–‡æ¡£**ï¼šåœ¨USAGE.mdä¸­æ·»åŠ ä¸¤ç§å®‰è£…æ–¹å¼

### é•¿æœŸè§„åˆ’ï¼š
1. **å‘å¸ƒåˆ°npm registry**ï¼šæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
2. **ç‰ˆæœ¬ç®¡ç†ç­–ç•¥**ï¼šå»ºç«‹æ¸…æ™°çš„ç‰ˆæœ¬å‘å¸ƒæµç¨‹
3. **ç”¨æˆ·åé¦ˆæ”¶é›†**ï¼šé€šè¿‡npmå’ŒGitHubæ”¶é›†ç”¨æˆ·åé¦ˆ
4. **æŒç»­ä¼˜åŒ–**ï¼šæ ¹æ®ä½¿ç”¨æƒ…å†µä¼˜åŒ–åŒ…å¤§å°å’ŒåŠŸèƒ½

## ğŸ’¡ å…³é”®å­¦ä¹ ç‚¹

### 1. npmåŒ…ç®¡ç†æœ€ä½³å®è·µ
- **fileså­—æ®µ**ï¼šç²¾ç¡®æ§åˆ¶å‘å¸ƒå†…å®¹ï¼Œé¿å…åŒ…å«ä¸å¿…è¦çš„æ–‡ä»¶
- **.npmignore**ï¼šè¡¥å……æ’é™¤è§„åˆ™ï¼Œç‰¹åˆ«æ˜¯å¯¹npm linkæœ‰æ•ˆ
- **ç‰ˆæœ¬ç®¡ç†**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼Œæ˜ç¡®åŠŸèƒ½å˜æ›´

### 2. å·¥å…·åŒ…è®¾è®¡æ€ç»´
- **ç”¨æˆ·ä½“éªŒä¼˜å…ˆ**ï¼šnpm installæ¯”npm linkæ›´å‹å¥½
- **å¼€å‘ä½“éªŒå¹³è¡¡**ï¼šnpm linké€‚åˆå¼€å‘é˜¶æ®µï¼Œnpm publishé€‚åˆç”Ÿäº§
- **æ–‡æ¡£å®Œæ•´æ€§**ï¼šæ¸…æ™°çš„å®‰è£…å’Œä½¿ç”¨æŒ‡å—æ˜¯æˆåŠŸçš„å…³é”®

### 3. é¡¹ç›®æˆç†Ÿåº¦æ ‡å¿—
- ä»å†…éƒ¨å·¥å…·åˆ°å…¬å…±åŒ…çš„è½¬å˜
- å®Œå–„çš„é…ç½®å’Œæ’é™¤æœºåˆ¶
- ä¸“ä¸šçš„å‘å¸ƒæµç¨‹

è¿™ä¸ªé—®é¢˜å¾ˆå¥½åœ°å±•ç¤ºäº†ä»åŸå‹å·¥å…·åˆ°äº§å“åŒ–å·¥å…·çš„é‡è¦è½¬å˜è¿‡ç¨‹ï¼ğŸš€
