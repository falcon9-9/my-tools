# Vueç»„ä»¶æ‹å¹³å·¥å…· (Vue Flattener 2)

ä¸€ä¸ªå¼ºå¤§çš„Vueç»„ä»¶æ‹å¹³å·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨å†…è”å­ç»„ä»¶ã€æ ·å¼å’Œè„šæœ¬ï¼Œæä¾›Webpackæ’ä»¶æ”¯æŒã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
- **ç»„ä»¶æ‹å¹³**: å°†Vueç»„ä»¶åŠå…¶ä¾èµ–çš„å­ç»„ä»¶å†…è”åˆ°å•ä¸ªæ–‡ä»¶ä¸­
- **æ ·å¼å†…è”**: æ”¯æŒCSSã€SCSSæ–‡ä»¶çš„å†…è”
- **è„šæœ¬å†…è”**: æ”¯æŒJavaScriptæ¨¡å—çš„å†…è”  
- **ä¾èµ–è¿½è¸ª**: æ™ºèƒ½åˆ†æç»„ä»¶ä¾èµ–å…³ç³»
- **å¢é‡æ›´æ–°**: ä»…é‡æ–°æ‹å¹³å—å½±å“çš„æ–‡ä»¶

### ğŸ“¦ Webpackæ’ä»¶
- **è‡ªåŠ¨ç›‘å¬**: ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼Œè‡ªåŠ¨æ‰§è¡Œæ‹å¹³
- **ä¾èµ–æ„ŸçŸ¥**: å½“ä¾èµ–æ–‡ä»¶å˜åŒ–æ—¶ï¼Œè‡ªåŠ¨é‡æ–°æ‹å¹³ç›¸å…³ç»„ä»¶
- **æ€§èƒ½ä¼˜åŒ–**: é˜²æŠ–æœºåˆ¶é¿å…é‡å¤æ‹å¹³
- **è¯¦ç»†æ—¥å¿—**: æä¾›è¯¦ç»†çš„æ‹å¹³è¿‡ç¨‹å’Œæ€§èƒ½ç»Ÿè®¡

## å®‰è£…ä¸ä½¿ç”¨

### æ–¹å¼ä¸€ï¼šnpm link æ–¹å¼ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰

1. **åœ¨vue-flattener-2ç›®å½•ä¸‹è®¾ç½®å…¨å±€é“¾æ¥**
```bash
cd vue-flattener-2
npm link
```

2. **åœ¨å…¶ä»–é¡¹ç›®ä¸­é“¾æ¥ä½¿ç”¨**
```bash
cd your-project
npm link vue-flattener-2
```

3. **åœ¨webpack.config.jsä¸­ä½¿ç”¨**
```javascript
const VueFlattenPlugin = require('vue-flattener-2/webpack-plugin');

module.exports = {
  // ... å…¶ä»–é…ç½®
  plugins: [
    // ... å…¶ä»–æ’ä»¶
    new VueFlattenPlugin({
      watchDir: path.resolve(__dirname, 'src/views') // æŒ‡å®šè¦ç›‘å¬çš„æ–‡ä»¶å¤¹
    })
  ]
};
```

### æ–¹å¼äºŒï¼šç›´æ¥å¼•ç”¨ï¼ˆç”¨äºåŒä¸€ä¸ªé¡¹ç›®å†…ï¼‰

```javascript
const VueFlattenPlugin = require('./path/to/vue-flattener-2/webpack-plugin');

module.exports = {
  plugins: [
    new VueFlattenPlugin({
      watchDir: path.resolve(__dirname, 'src/views')
    })
  ]
};
```

## é…ç½®é€‰é¡¹

### VueFlattenPlugin é…ç½®

```javascript
new VueFlattenPlugin({
  // å¿…éœ€ï¼šç›‘å¬çš„æ–‡ä»¶å¤¹è·¯å¾„
  watchDir: path.resolve(__dirname, 'src/views'),
  
  // å¯é€‰ï¼šVueFlattenerçš„è·¯å¾„ï¼ˆé»˜è®¤ä½¿ç”¨å†…ç½®çš„ï¼‰
  flattenerPath: './custom/path/to/flattener'
})
```

## API ä½¿ç”¨

### ç¼–ç¨‹å¼ä½¿ç”¨

```javascript
const VueFlattener = require('vue-flattener-2');

const flattener = new VueFlattener();

// æ‹å¹³å•ä¸ªæ–‡ä»¶
await flattener.flatten(
  './src/components/MyComponent.vue',  // è¾“å…¥æ–‡ä»¶
  './dist/MyComponent.flattened.vue'  // è¾“å‡ºæ–‡ä»¶
);
```

## ç¤ºä¾‹é¡¹ç›®

é¡¹ç›®åŒ…å«ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨webpackæ’ä»¶ï¼š

```bash
cd vue-flattener-2
npm run install-all  # å®‰è£…æ‰€æœ‰ä¾èµ–
npm run dev          # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```

### ç¤ºä¾‹æ–‡ä»¶ç»“æ„
```
example/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/           # ç›‘å¬çš„ç›®å½•
â”‚   â”‚   â”œâ”€â”€ Demo.vue     # ä¸»ç»„ä»¶
â”‚   â”‚   â””â”€â”€ Demo.flattened.vue  # è‡ªåŠ¨ç”Ÿæˆçš„æ‹å¹³æ–‡ä»¶
â”‚   â”œâ”€â”€ components/      # å­ç»„ä»¶
â”‚   â”œâ”€â”€ styles/         # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â””â”€â”€ webpack.config.js   # webpacké…ç½®
```

## å·¥ä½œåŸç†

### 1. ä¾èµ–åˆ†æ
æ’ä»¶ä¼šåˆ†ææ¯ä¸ªVueæ–‡ä»¶çš„ä¾èµ–å…³ç³»ï¼š
- è§£æ`import`è¯­å¥
- é€’å½’åˆ†æä¾èµ–æ–‡ä»¶
- å»ºç«‹ä¾èµ–æ˜ å°„å…³ç³»

### 2. æ™ºèƒ½ç›‘å¬
- ç›‘å¬viewsæ–‡ä»¶å¤¹ä¸­çš„ç›´æ¥æ–‡ä»¶å˜åŒ–
- ç›‘å¬ä¾èµ–æ–‡ä»¶çš„å˜åŒ–
- æ ¹æ®ä¾èµ–å…³ç³»ç¡®å®šéœ€è¦é‡æ–°æ‹å¹³çš„æ–‡ä»¶

### 3. å¢é‡æ‹å¹³
- åªæ‹å¹³å—å½±å“çš„æ–‡ä»¶
- é˜²æŠ–æœºåˆ¶é¿å…é¢‘ç¹æ‹å¹³
- æä¾›è¯¦ç»†çš„æ€§èƒ½ç»Ÿè®¡

## è¾“å‡ºç¤ºä¾‹

### å¯åŠ¨æ—¶çš„ä¾èµ–åˆ†æ
```
[VueFlattenPlugin] ğŸ” å¼€å§‹åˆ†æä¾èµ–å…³ç³»...
[VueFlattenPlugin] ğŸ“ å‘ç°1ä¸ªviewsæ–‡ä»¶: Demo.vue
[VueFlattenPlugin] ğŸ” åˆ†æ Demo.vue çš„ä¾èµ–...
[VueFlattenPlugin] âœ… Demo.vue ä¾èµ–åˆ†æå®Œæˆï¼Œå…± 6 ä¸ªä¾èµ–

ğŸ“Š ä¾èµ–åˆ†æç»“æœ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ Demo.vue:
   ğŸ”— ../components/Counter.vue
   ğŸ”— ../components/HelloWorld.vue
   ğŸ”— ../utils/helpers.js
   ğŸ”— ../styles/theme.css
   ğŸ”— ../styles/animations.scss

ğŸ¯ ä¾èµ–å½±å“èŒƒå›´:
ğŸ“ components/Counter.vue â†’ Demo.vue
ğŸ“ components/HelloWorld.vue â†’ Demo.vue
ğŸ“ utils/helpers.js â†’ Demo.vue
```

### æ‹å¹³è¿‡ç¨‹ç»Ÿè®¡
```
ğŸ“¦ ========== æ‹å¹³æ±‡æ€»æŠ¥å‘Š ==========
â° å¼€å§‹æ—¶é—´: 2024/6/28 ä¸‹åˆ4:15:32
â±ï¸ ç»“æŸæ—¶é—´: 2024/6/28 ä¸‹åˆ4:15:33  
ğŸ•’ æ€»è€—æ—¶: 486ms (0.49s)
ğŸ“Š å¤„ç†æ–‡ä»¶: 1 ä¸ª
âœ… æˆåŠŸ: 1 ä¸ª
âŒ å¤±è´¥: 0 ä¸ª
ğŸ“ˆ æˆåŠŸç‡: 100.0%

ğŸ“‹ è¯¦ç»†è®°å½•:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. âœ… Demo.vue - 486ms (2.39 KB â†’ 8.96 KB)
   ğŸ“ˆ æ–‡ä»¶å¢å¤§: +6.57 KB (+274.9%)
```

## æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶ç›‘å¬**: åªç›‘å¬æŒ‡å®šçš„`watchDir`ç›®å½•ä¸‹çš„`.vue`æ–‡ä»¶
2. **è¾“å‡ºæ–‡ä»¶**: æ‹å¹³åçš„æ–‡ä»¶ä¼šä»¥`.flattened.vue`ä¸ºåç¼€
3. **ä¾èµ–æ›´æ–°**: å½“ä¾èµ–æ–‡ä»¶æ”¹å˜æ—¶ï¼Œä¼šè‡ªåŠ¨é‡æ–°æ‹å¹³ç›¸å…³çš„ç»„ä»¶
4. **æ€§èƒ½ä¼˜åŒ–**: å†…ç½®é˜²æŠ–æœºåˆ¶ï¼Œ1ç§’å†…çš„é‡å¤å˜åŒ–ä¼šè¢«åˆå¹¶å¤„ç†

## å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
vue-flattener-2/
â”œâ”€â”€ src/                 # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ index.js        # ä¸»å…¥å£
â”‚   â”œâ”€â”€ parser/         # Vueæ–‡ä»¶è§£æå™¨
â”‚   â””â”€â”€ inliner/        # å†…è”å™¨
â”œâ”€â”€ webpack-plugin.js   # Webpackæ’ä»¶
â”œâ”€â”€ example/            # ç¤ºä¾‹é¡¹ç›®
â””â”€â”€ package.json        # åŒ…é…ç½®
```

### è„šæœ¬å‘½ä»¤
```bash
npm run dev              # å¯åŠ¨ç¤ºä¾‹å¼€å‘æœåŠ¡å™¨
npm run install-all      # å®‰è£…æ‰€æœ‰ä¾èµ–
npm run link-global      # è®¾ç½®å…¨å±€é“¾æ¥
npm run unlink-global    # å–æ¶ˆå…¨å±€é“¾æ¥
```

## è®¸å¯è¯

ISC License 